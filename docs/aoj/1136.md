[ğŸ  Home](../index.md)  |  [ğŸ”— AOJ 1136](https://onlinejudge.u-aizu.ac.jp/services/ice/?problemId=1136)

# å•é¡Œï¼šPolygonal Line Search
ãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰å¹³é¢ä¸Šã« $n + 1$ å€‹ã®æŠ˜ã‚Œç·šãŒã‚ã‚‹ã€‚å„æŠ˜ã‚Œç·šã¯è‡ªå·±äº¤å·®ã›ãšã€æŠ˜ã‚Œç·šã®å„é ‚ç‚¹ã¯æ•´æ•°åº§æ¨™ã§ã©ã® 2 é ‚ç‚¹ã‚‚ç­‰ã—ããªãã€å„è¾ºã¯ $x$ è»¸ã¾ãŸã¯ $y$ è»¸ã«å¹³è¡Œã§ã‚ã‚‹ã€‚  
1 ç•ªç›®ã®æŠ˜ã‚Œç·šã¨å›è»¢ã¨å¹³è¡Œç§»å‹•ã«é–¢ã—ã¦ç­‰ã—ããªã‚‹æŠ˜ã‚Œç·šã‚’ $n$ å€‹ã®ä¸­ã‹ã‚‰ã™ã¹ã¦ç­”ãˆã‚ˆã€‚

- $1 \le n \le 50$
- $3 \le \text{æŠ˜ã‚Œç·šã®é ‚ç‚¹æ•°} \le 10$

# è§£æ³•
$n, m$ ãŒå°ã•ã„ã®ã§æ„šç›´ã«äºŒã¤ã®æŠ˜ã‚Œç·šãŒç­‰ã—ã„ã‹ã©ã†ã‹ã‚’åˆ¤å®šã™ã‚‹ã€‚  
ä¸ãˆã‚‰ã‚Œã‚‹æŠ˜ã‚Œç·šã¯å„é ‚ç‚¹ã§å·¦ã‹å³ã«å‚ç›´ã«æ›²ãŒã‚‹ã‹ã©ã†ã‹ãªã®ã§ã€å§‹ç‚¹ã‹ã‚‰ç·šåˆ†ã®é•·ã•ã€
æ¬¡ã«ã©ã“ã«æ›²ãŒã‚‹ã‹ã®æƒ…å ±ã‚’çµ‚ç‚¹ã¾ã§æŠ½å‡ºã—ã¦æ•´æ•°åˆ—ã«å¤‰æ›ã—ã¦ã€æ•´æ•°åˆ—åŒå£«ã®æ¯”è¼ƒã‚’è¡Œã†ã€‚
æ•´æ•°åˆ—ã®å¶æ•°ç•ªç›®ã¯ç·šåˆ†ã®é•·ã•ã§ã€å¥‡æ•°ç•ªç›®ã¯æ¬¡ã®é ‚ç‚¹ãŒåæ™‚è¨ˆå›ã‚Šã«ä½ç½®ã™ã‚‹ãªã‚‰ 1ã€æ™‚è¨ˆå›ã‚Šã«ä½ç½®ã™ã‚‹ãªã‚‰ 0 ã¨ã™ã‚‹ã€‚  
é †æ–¹å‘ã« 2 ã¤ã®æŠ˜ã‚Œç·šã‚’æ¯”è¼ƒã™ã‚‹ã¨ãã¯ã€æŠ˜ã‚Œç·šãŒåŒã˜ã§ã‚ã‚‹ã“ã¨ã¨æ•´æ•°åˆ—ãŒç­‰ã—ã„ã“ã¨ãŒä¸€è‡´ã—ã¦ã€ç‰‡æ–¹ãŒé€†æ–¹å‘ã®å ´åˆã¯å¥‡æ•°ç•ªç›®ã® 0 ã¨ 1 ãŒç•°ãªã‚Šã€å¶æ•°ç•ªç›®ãŒç­‰ã—ã„ã“ã¨ãŒãŒæŠ˜ã‚Œç·šãŒç­‰ã—ã„ã‹ã©ã†ã‹ã®æ¡ä»¶ã¨ãªã‚‹ã€‚

---------------------------------------------------------------------------------------------

<details>
<summary>src/aoj/1136.cc ã‚’è¡¨ç¤º</summary>

```cpp
#include <iostream>
#include <vector>
#include <algorithm>

struct Point {
    int x = 0, y = 0;
    Point() {}
    Point(int _x, int _y) : x(_x), y(_y) {}
    Point operator-(const Point &rhs) { return Point(x - rhs.x, y - rhs.y); }
    Point operator-=(const Point &rhs) { return *this = *this - rhs; }
};

std::istream& operator>>(std::istream &is, Point &p) { return is >> p.x >> p.y; }
int distance(const Point &p1, const Point &p2) { return std::abs(p1.x - p2.x) + std::abs(p1.y - p2.y); }
int abs_cross(const Point &p1, const Point &p2) { return p1.x * p2.y - p1.y * p2.x; }

bool IsCounterClockwise(const Point &a, Point b, Point c) {
    b -= a; c -= a;
    return abs_cross(b, c) >= 0;
}

std::vector<int> GetCodedPolygonalLine() {
    int m;
    std::cin >> m;
    std::vector<int> poly;
    poly.reserve(m - 1 + m - 2);
    Point prev, mid, cur;

    std::cin >> prev >> mid;
    poly.push_back(distance(prev, mid));

    for (int i = 2; i < m; ++i) {
        std::cin >> cur;
        poly.push_back(IsCounterClockwise(prev, mid, cur));
        poly.push_back(distance(mid, cur));
        std::swap(prev, mid);
        std::swap(mid, cur);
    }

    return poly;
}

bool SamePolygonalLine(const std::vector<int> &pl1, const std::vector<int> &pl2) {
    if (pl1.size() != pl2.size()) return false;

    const bool forward = std::equal(pl1.begin(), pl1.end(), pl2.begin(), pl2.end());
    if (forward) return true;

    int idx = 0;
    return std::equal(pl1.begin(), pl1.end(), pl2.rbegin(), pl2.rend(),
                    [&idx](int p1, int p2) {
                        if (idx++ % 2 == 0) { return p1 == p2; }
                        else { return p1 != p2; }
                    });
}

void PolygonalLineSearch(const int n) {
    std::vector<int> original = GetCodedPolygonalLine();

    for (int i = 0; i < n; ++i) {
        auto poly = GetCodedPolygonalLine();
        if (SamePolygonalLine(original, poly)) {
            std::cout << i + 1 << "\n";
        }
    }
}

int main() {
    int n;
    while (std::cin >> n, n) {
        PolygonalLineSearch(n);
        std::cout << "+++++\n";
    }

    return 0;
}
```

</details>
